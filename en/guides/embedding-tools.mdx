---
title: "Guide: Integrating UBIK with an iframe"
description: "Learn how to securely embed a UBIK tool's UI directly into your web application for a seamless user experience."
---

Embedding UBIK tools into your own application provides a powerful way to extend your product's capabilities. This guide will walk you through the process of securely embedding a tool using an `<iframe>`.

<Steps>

<Step title="Configure Allowed Origins">
  To prevent unauthorized domains from embedding your tools, you must first configure a list of **Allowed Origins** for your API key. This is a critical security step. An "origin" is the combination of a protocol, domain, and port (e.g., `https://yourapp.com`).

  You can set the allowed origins for your API keys in the user settings page on the UBIK dashboard.

  <Card
    title="Go to API Key Settings"
    icon="key"
    href="https://app.ubik-agent.com/user/api-keys"
  />

  <Note>
  For local development, you can add origins like `http://localhost:3000`. For production, ensure you only add the domains where your application is hosted.
  </Note>
</Step>

<Step title="Fetch Embedding Information">
  Before you can render the `<iframe>`, your application's frontend needs to fetch the embedding details from the UBIK API. This is done by making a `GET` request to the `/tools/{tool_id}/embed-info` endpoint.

  This endpoint provides two crucial pieces of information:
  1.  **Tool Details**: The schema, name, description, etc.
  2.  **Access Token**: A short-lived JSON Web Token (JWT) that the embedded `<iframe>` will use to authenticate itself.

  <CodeGroup title="GET /tools/{tool_id}/embed-info">
  ```bash cURL
  curl -X GET "https://app.ubik-agent.com/api/v1/tools/YOUR_TOOL_ID/embed-info" \
       -H "X-API-KEY: YOUR_API_KEY"
  ```
  ```python Python (Server-Side)
  import requests

  api_key = "YOUR_API_KEY"
  tool_id = "YOUR_TOOL_ID"
  
  headers = {"X-API-KEY": api_key}
  
  # This call would typically be made from your server, which then passes
  # the embed info to your frontend client.
  response = requests.get(
      f"https://app.ubik-agent.com/api/v1/tools/{tool_id}/embed-info",
      headers=headers
  )

  if response.status_code == 200:
      embed_info = response.json()
      print(embed_info)
      # Pass this info to your frontend
  else:
      print(f"Error: {response.status_code}", response.text)
  ```
  ```javascript JavaScript (Client-Side)
  // This function would typically call an endpoint on YOUR server, 
  // which then makes the secure call to the UBIK API with your secret API key.
  
  async function fetchEmbedInfoFromServer(toolId) {
    try {
      // Example: an endpoint on your own backend
      const response = await fetch(`/api/get-tool-embed-info?toolId=${toolId}`);
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      const embedInfo = await response.json();
      console.log(embedInfo);
      // Use this data to render the iframe
      return embedInfo;
    } catch (error) {
      console.error('Error fetching embed info:', error);
    }
  }
  ```
  </CodeGroup>
  
  <Tip icon="shield-check">
    **Security Best Practice**: Your secret UBIK API key should never be exposed in your frontend application. The call to `/embed-info` should be made from your backend server, which can then pass the resulting short-lived `access_token` and tool details to the client.
  </Tip>
</Step>

<Step title="Render the iframe">
  Once your frontend has the embedding information, you can construct the `<iframe>` URL and render it. The URL should be in the format: `/embed/tools/{tool_id}`.

  You will then need to send the `access_token` to the `<iframe>` using `postMessage` once it has loaded.

  Here is a simplified example using React:

  ```jsx React Example
  import React, { useState, useEffect, useRef } from 'react';

  const EmbeddedTool = ({ toolId }) => {
    const [embedInfo, setEmbedInfo] = useState(null);
    const iframeRef = useRef(null);

    useEffect(() => {
      // In a real app, this would fetch from your backend
      const fetchEmbedInfo = async () => {
        const response = await fetch(`/api/get-tool-embed-info?toolId=${toolId}`);
        const data = await response.json();
        setEmbedInfo(data);
      };

      fetchEmbedInfo();
    }, [toolId]);

    const handleIframeLoad = () => {
      if (iframeRef.current && embedInfo?.access_token) {
        // The target origin should be the UBIK app's origin
        const targetOrigin = "https://app.ubik-agent.com";
        iframeRef.current.contentWindow.postMessage(
          {
            type: 'UBIK_EMBED_TOKEN',
            token: embedInfo.access_token,
          },
          targetOrigin
        );
      }
    };

    if (!embedInfo) {
      return <div>Loading Tool...</div>;
    }

    const iframeSrc = `https://app.ubik-agent.com/embed/tools/${embedInfo.id}`;

    return (
      <iframe
        ref={iframeRef}
        src={iframeSrc}
        onLoad={handleIframeLoad}
        title={embedInfo.name}
        width="100%"
        height="600px"
        frameBorder="0"
      />
    );
  };

  export default EmbeddedTool;
  ```

</Step>

</Steps>

By following these steps, you can securely embed UBIK's powerful tools directly into your application, creating a seamless and integrated experience for your users.
