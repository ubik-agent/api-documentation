{
  "openapi": "3.1.0",
  "info": {
    "title": "UBIK Public API",
    "description": "Publicly accessible API endpoints for UBIK.",
    "version": "1.0"
  },
  "servers": [
    {
      "url": "/api/v1"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Public API",
          "Public API"
        ],
        "summary": "État du service",
        "description": "Route pour la vérification de l'état du service de l'API publique.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {},
                "example": {
                  "status": "ok",
                  "user": "testuser"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/users/me": {
      "get": {
        "tags": [
          "Public API",
          "Public API",
          "Users"
        ],
        "summary": "Consulter l'utilisateur actuel",
        "description": "Récupère les informations détaillées de l'utilisateur currently authentifié.",
        "operationId": "read_current_user_users_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicUserResponse"
                },
                "example": {
                  "username": "testuser",
                  "full_name": "Test User",
                  "uuid_id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
                  "created_at": "2025-09-28T12:00:00Z",
                  "balance": 100.0,
                  "chat_session_count": 5,
                  "document_count": 42,
                  "workspace_count": 3,
                  "assistant_count": 2
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/workspaces": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Workspaces"
        ],
        "summary": "Lister les espaces de travail",
        "description": "Récupère une liste paginée de tous les espaces de travail accessibles à l'utilisateur, incluant les espaces personnels et ceux partagés via l'entreprise.",
        "operationId": "get_workspaces_workspaces_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicPaginatedWorkspacesResponse"
                },
                "example": {
                  "items": [
                    {
                      "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
                      "name": "My Project Workspace",
                      "description": "Contains all documents related to the Q1 sales report.",
                      "is_default": true,
                      "created_at": "2025-09-28T10:00:00Z",
                      "updated_at": "2025-09-28T11:00:00Z",
                      "document_count": 42
                    }
                  ],
                  "total": 1,
                  "page": 1,
                  "limit": 20,
                  "has_more": false
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Public API",
          "Public API - Workspaces"
        ],
        "summary": "Créer un espace de travail",
        "description": "Crée un nouvel espace de travail personnel pour l'utilisateur.",
        "operationId": "create_workspace_workspaces_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkspaceCreate"
              },
              "example": {
                "name": "New Project Workspace",
                "description": "Workspace for the new project.",
                "is_default": false
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicWorkspace"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                },
                "example": {
                  "detail": [
                    {
                      "loc": [
                        "body",
                        "name"
                      ],
                      "msg": "field required",
                      "type": "value_error.missing"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspace_id}": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Workspaces"
        ],
        "summary": "Détails d'un espace de travail",
        "description": "Récupère les informations détaillées d'un espace de travail spécifique, si l'utilisateur dispose des permissions nécessaires.",
        "operationId": "get_workspace_workspaces__workspace_id__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "workspace_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Workspace Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicWorkspace"
                },
                "example": {
                  "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
                  "name": "My Project Workspace",
                  "description": "Contains all documents related to the Q1 sales report.",
                  "is_default": true,
                  "created_at": "2025-09-28T10:00:00Z",
                  "updated_at": "2025-09-28T11:00:00Z",
                  "document_count": 42
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Public API",
          "Public API - Workspaces"
        ],
        "summary": "Supprimer un espace de travail",
        "description": "Supprime un espace de travail, si l'utilisateur en est le propriétaire.",
        "operationId": "delete_workspace_workspaces__workspace_id__delete",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "workspace_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Workspace Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspace_id}/documents": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Workspaces"
        ],
        "summary": "Lister les documents dans un espace de travail",
        "description": "Récupère une liste paginée de documents dans un espace de travail spécifique.",
        "operationId": "get_workspace_documents_workspaces__workspace_id__documents_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "workspace_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Workspace Id"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicPaginatedDocumentsResponse"
                },
                "example": {
                  "items": [
                    {
                      "id": "c1d2e3f4-a5b6-7890-1234-567890abcdef",
                      "name": "Q1 Sales Report.pdf",
                      "file_type": "application/pdf",
                      "status": "completed",
                      "created_at": "2025-09-28T10:05:00Z",
                      "updated_at": "2025-09-28T10:05:00Z",
                      "processing_pipeline": "default-pipeline"
                    }
                  ],
                  "total": 1,
                  "page": 1,
                  "limit": 20,
                  "has_more": false
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/documents": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Documents"
        ],
        "summary": "Lister les documents",
        "description": "Récupère une liste paginée de tous les documents accessibles à l'utilisateur.",
        "operationId": "get_documents_documents_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicPaginatedDocumentsResponse"
                },
                "example": {
                  "items": [
                    {
                      "id": "c1d2e3f4-a5b6-7890-1234-567890abcdef",
                      "name": "Q1 Sales Report.pdf",
                      "file_type": "application/pdf",
                      "status": "completed",
                      "created_at": "2025-09-28T10:05:00Z",
                      "updated_at": "2025-09-28T10:05:00Z",
                      "processing_pipeline": "default-pipeline"
                    }
                  ],
                  "total": 256,
                  "page": 1,
                  "limit": 20,
                  "has_more": true
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Public API",
          "Public API - Documents"
        ],
        "summary": "Ingestion de documents (fichiers ou URLs)",
        "description": "Route unifiée pour ingérer des documents depuis diverses sources.\n\nCette route gère le téléversement de fichiers et le scraping d'URLs en une seule requête (multipart/form-data).\n\n- Pour téléverser des fichiers, utilisez le champ 'files'.\n- Pour scraper des URLs, utilisez le champ 'urls' (liste séparée par des virgules).\n- Associez les documents à des espaces de travail via 'workspace_ids'.",
        "operationId": "ingest_documents_documents_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_ingest_documents_documents_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PublicDocument"
                  },
                  "title": "Response Ingest Documents Documents Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Either 'files' or 'urls' must be provided."
                }
              }
            }
          }
        }
      }
    },
    "/documents/{document_id}": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Documents"
        ],
        "summary": "Détails d'un document",
        "description": "Récupère les informations détaillées d'un document spécifique, si l'utilisateur dispose des permissions nécessaires.",
        "operationId": "get_document_documents__document_id__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Document Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicDocument"
                },
                "example": {
                  "id": "c1d2e3f4-a5b6-7890-1234-567890abcdef",
                  "name": "Q1 Sales Report.pdf",
                  "file_type": "application/pdf",
                  "status": "completed",
                  "created_at": "2025-09-28T10:05:00Z",
                  "updated_at": "2025-09-28T10:05:00Z",
                  "processing_pipeline": "default-pipeline",
                  "file_name": "2024_Q1_Sales_Final_v2.pdf",
                  "markdown_content": "# Q1 Sales Report..."
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Public API",
          "Public API - Documents"
        ],
        "summary": "Supprimer un document",
        "description": "Supprime un document. Cette action le retire de l'espace de travail par défaut de l'utilisateur et le supprime définitivement du système si l'utilisateur en est le dernier propriétaire.",
        "operationId": "delete_document_documents__document_id__delete",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Document Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/documents/{document_id}/workspaces": {
      "post": {
        "tags": [
          "Public API",
          "Public API - Documents"
        ],
        "summary": "Ajouter un document aux espaces de travail",
        "description": "Ajoute un document à un ou plusieurs espaces de travail.",
        "operationId": "add_document_to_workspaces_documents__document_id__workspaces_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Document Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchWorkspaceRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Public API",
          "Public API - Documents"
        ],
        "summary": "Retirer un document d'espaces de travail",
        "description": "Retire un document d'un ou de plusieurs espaces de travail.",
        "operationId": "remove_document_from_workspaces_documents__document_id__workspaces_delete",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Document Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchWorkspaceRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspace_id}/documents/{document_id}": {
      "delete": {
        "tags": [
          "Public API",
          "Public API - Workspaces"
        ],
        "summary": "Retirer un document d'un espace de travail",
        "description": "Retire un document d'un espace de travail spécifique, sans supprimer le document lui-même.",
        "operationId": "remove_document_from_workspace_workspaces__workspace_id__documents__document_id__delete",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "workspace_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Workspace Id"
            }
          },
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Document Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tools": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Tools"
        ],
        "summary": "Lister les outils disponibles",
        "description": "Récupère une liste paginée de tous les outils accessibles à l'utilisateur.",
        "operationId": "get_public_tools_tools_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicPaginatedToolsResponse"
                },
                "example": {
                  "items": [
                    {
                      "id": "d1e2f3a4-b5c6-7890-1234-567890abcdef",
                      "name": "Financial Data Extractor",
                      "description": "Extracts key financial metrics from annual reports."
                    }
                  ],
                  "total": 35,
                  "page": 1,
                  "limit": 20,
                  "has_more": true
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tools/{tool_id}": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Tools"
        ],
        "summary": "Détails d'un outil",
        "description": "Récupère les informations détaillées d'un outil spécifique, si l'utilisateur dispose des permissions nécessaires.",
        "operationId": "get_public_tool_tools__tool_id__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "tool_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Tool Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicTool"
                },
                "example": {
                  "id": "d1e2f3a4-b5c6-7890-1234-567890abcdef",
                  "name": "Financial Data Extractor",
                  "description": "Extracts key financial metrics from annual reports.",
                  "input_schema": {
                    "type": "object",
                    "properties": {
                      "stock_symbol": {
                        "type": "string",
                        "description": "The stock symbol of the company."
                      },
                      "report_year": {
                        "type": "integer",
                        "description": "The year of the financial report."
                      }
                    },
                    "required": [
                      "stock_symbol",
                      "report_year"
                    ]
                  },
                  "media_output_keys": [],
                  "example_responses": [
                    {
                      "revenue": 1000000,
                      "profit": 250000
                    }
                  ],
                  "pricing_config": {
                    "fixed_cost": 0.01
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tools/{tool_id}/execute": {
      "post": {
        "tags": [
          "Public API",
          "Public API - Tool Executions"
        ],
        "summary": "Exécuter un outil",
        "description": "Démarre de manière asynchrone l'exécution d'un outil et renvoie un ID pour suivre les résultats.",
        "operationId": "execute_public_tool_tools__tool_id__execute_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "tool_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Tool Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PublicToolExecutionRequest"
              },
              "example": {
                "inputs": {
                  "stock_symbol": "ACME",
                  "report_year": 2023
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicToolExecutionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                },
                "example": {
                  "detail": [
                    {
                      "loc": [
                        "body",
                        "inputs"
                      ],
                      "msg": "field required",
                      "type": "value_error.missing"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/tool-executions/{execution_id}": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Tool Executions"
        ],
        "summary": "Résultat d'une exécution",
        "description": "Récupère le statut et le résultat d'une exécution d'outil spécifique.",
        "operationId": "get_public_tool_execution_tool_executions__execution_id__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "execution_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Execution Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublicToolExecutionResult"
                },
                "example": {
                  "id": "exec_123456789",
                  "tool_id": "d1e2f3a4-b5c6-7890-1234-567890abcdef",
                  "user_id": 123,
                  "status": "completed",
                  "inputs": {
                    "stock_symbol": "ACME"
                  },
                  "outputs": {
                    "revenue": 1000000,
                    "profit": 250000
                  },
                  "created_at": "2025-09-28T12:00:00Z",
                  "started_at": "2025-09-28T12:00:01Z",
                  "completed_at": "2025-09-28T12:00:05Z"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tool-executions/{execution_id}/stream": {
      "get": {
        "tags": [
          "Public API",
          "Public API - Tool Executions"
        ],
        "summary": "Streaming des événements d'exécution",
        "description": "Permet de s'abonner en temps réel aux événements (Server-Sent Events) d'une exécution d'outil.",
        "operationId": "stream_public_tool_execution_tool_executions__execution_id__stream_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "execution_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Execution Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tool-executions/{execution_id}/provide-input": {
      "post": {
        "tags": [
          "Public API",
          "Public API - Tool Executions"
        ],
        "summary": "Soumettre des données à un outil en attente",
        "description": "Permet de fournir les données requises par une exécution d'outil actuellement en état 'waiting_for_input'.",
        "operationId": "provide_public_tool_input_tool_executions__execution_id__provide_input_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "execution_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Execution Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_provide_public_tool_input_tool_executions__execution_id__provide_input_post"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "BatchWorkspaceRequest": {
        "properties": {
          "workspace_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "title": "Workspace Ids",
            "description": "Une liste d'identifiants uniques d'espaces de travail."
          }
        },
        "type": "object",
        "required": [
          "workspace_ids"
        ],
        "title": "BatchWorkspaceRequest"
      },
      "Body_ingest_documents_documents_post": {
        "properties": {
          "files": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "format": "binary"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Files",
            "description": "A list of files to upload."
          },
          "urls": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Urls",
            "description": "A comma-separated list of URLs to scrape."
          },
          "workspace_ids": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workspace Ids",
            "description": "A comma-separated list of workspace IDs to add the documents to."
          },
          "scraping_mode": {
            "type": "string",
            "title": "Scraping Mode",
            "description": "Scraping mode ('Simple Scraping' or 'Crawling').",
            "default": "Simple Scraping"
          },
          "crawl_depth": {
            "type": "integer",
            "title": "Crawl Depth",
            "default": 2
          },
          "same_domain_only": {
            "type": "boolean",
            "title": "Same Domain Only",
            "default": true
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "default": 10
          },
          "delay": {
            "type": "number",
            "title": "Delay",
            "default": 1.0
          },
          "youtube_download_format": {
            "type": "string",
            "title": "Youtube Download Format",
            "default": "audio"
          }
        },
        "type": "object",
        "title": "Body_ingest_documents_documents_post"
      },
      "Body_provide_public_tool_input_tool_executions__execution_id__provide_input_post": {
        "properties": {
          "file": {
            "anyOf": [
              {
                "type": "string",
                "format": "binary"
              },
              {
                "type": "null"
              }
            ],
            "title": "File",
            "description": "An optional file to upload as input."
          },
          "input_data_json": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Input Data Json",
            "description": "Optional JSON data to provide as input."
          }
        },
        "type": "object",
        "title": "Body_provide_public_tool_input_tool_executions__execution_id__provide_input_post"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "PublicDocument": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "L'identifiant unique du document."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Le nom d'affichage du document."
          },
          "file_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Type",
            "description": "Le type MIME du fichier du document."
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Le statut de traitement actuel du document."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "L'horodatage de la création du document."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "L'horodatage de la dernière mise à jour du document."
          },
          "processing_pipeline": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processing Pipeline",
            "description": "Le nom du pipeline de traitement utilisé pour ce document."
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Si le traitement a échoué, ce champ contiendra le message d'erreur."
          },
          "file_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Name",
            "description": "Le nom de fichier original du document."
          },
          "markdown_content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Markdown Content",
            "description": "Le contenu complet du document converti au format Markdown."
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "PublicDocument"
      },
      "PublicDocumentListItem": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "L'identifiant unique du document."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Le nom d'affichage du document."
          },
          "file_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Type",
            "description": "Le type MIME du fichier du document."
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Le statut de traitement actuel du document."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "L'horodatage de la création du document."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "L'horodatage de la dernière mise à jour du document."
          },
          "processing_pipeline": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processing Pipeline",
            "description": "Le nom du pipeline de traitement utilisé pour ce document."
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Si le traitement a échoué, ce champ contiendra le message d'erreur."
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "PublicDocumentListItem"
      },
      "PublicPaginatedDocumentsResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/PublicDocumentListItem"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Nombre total de documents disponibles."
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Le numéro de la page actuelle."
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Le nombre d'éléments par page."
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Indique s'il y a d'autres pages disponibles."
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "page",
          "limit",
          "has_more"
        ],
        "title": "PublicPaginatedDocumentsResponse"
      },
      "PublicPaginatedToolsResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/PublicToolListItem"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Nombre total d'outils disponibles."
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Le numéro de la page actuelle."
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Le nombre d'éléments par page."
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Indique s'il y a d'autres pages disponibles."
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "page",
          "limit",
          "has_more"
        ],
        "title": "PublicPaginatedToolsResponse"
      },
      "PublicPaginatedWorkspacesResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/PublicWorkspace"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Nombre total d'espaces de travail disponibles."
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Le numéro de la page actuelle."
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Le nombre d'éléments par page."
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Indique s'il y a d'autres pages disponibles."
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "page",
          "limit",
          "has_more"
        ],
        "title": "PublicPaginatedWorkspacesResponse"
      },
      "PublicTool": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "L'identifiant unique de l'outil."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Le nom de l'outil."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Une brève description de ce que fait l'outil."
          },
          "input_schema": {
            "$ref": "#/components/schemas/ToolInputSchema"
          },
          "media_output_keys": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Media Output Keys"
          },
          "example_responses": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Example Responses"
          },
          "pricing_config": {
            "$ref": "#/components/schemas/ToolPricingConfig"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "input_schema",
          "media_output_keys",
          "example_responses",
          "pricing_config"
        ],
        "title": "PublicTool"
      },
      "PublicToolExecutionRequest": {
        "properties": {
          "inputs": {
            "additionalProperties": true,
            "type": "object",
            "title": "Inputs",
            "description": "Un dictionnaire d'entrées pour l'outil, correspondant à son input_schema."
          }
        },
        "type": "object",
        "required": [
          "inputs"
        ],
        "title": "PublicToolExecutionRequest"
      },
      "PublicToolExecutionResponse": {
        "properties": {
          "execution_id": {
            "type": "string",
            "title": "Execution Id",
            "description": "L'identifiant unique de cette instance d'exécution d'outil."
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Le statut actuel de l'exécution."
          },
          "tool_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tool Id",
            "description": "L'ID de l'outil en cours d'exécution."
          },
          "details_url": {
            "type": "string",
            "title": "Details Url",
            "description": "L'URL pour interroger le résultat final de l'exécution."
          },
          "stream_url": {
            "type": "string",
            "title": "Stream Url",
            "description": "L'URL pour diffuser en temps réel les événements de cette exécution."
          }
        },
        "type": "object",
        "required": [
          "execution_id",
          "status",
          "tool_id",
          "details_url",
          "stream_url"
        ],
        "title": "PublicToolExecutionResponse"
      },
      "PublicToolExecutionResult": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "L'identifiant unique de l'instance d'exécution."
          },
          "tool_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tool Id",
            "description": "L'ID de l'outil qui a été exécuté."
          },
          "user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "L'ID de l'utilisateur qui a initié l'exécution."
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Le statut final de l'exécution."
          },
          "inputs": {
            "additionalProperties": true,
            "type": "object",
            "title": "Inputs",
            "description": "Les entrées originales fournies à l'outil."
          },
          "outputs": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Outputs",
            "description": "Les sorties générées par l'outil."
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Si l'exécution a échoué, ce champ contient le message d'erreur."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Horodatage de la création de l'exécution."
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At",
            "description": "Horodatage du début du traitement de l'exécution."
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "Horodatage de la fin (succès ou échec) de l'exécution."
          }
        },
        "type": "object",
        "required": [
          "id",
          "tool_id",
          "status",
          "inputs",
          "created_at"
        ],
        "title": "PublicToolExecutionResult"
      },
      "PublicToolListItem": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "L'identifiant unique de l'outil."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Le nom de l'outil."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Une brève description de ce que fait l'outil."
          }
        },
        "type": "object",
        "required": [
          "id",
          "name"
        ],
        "title": "PublicToolListItem"
      },
      "PublicUserResponse": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "uuid_id": {
            "type": "string",
            "format": "uuid",
            "title": "Uuid Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "balance": {
            "type": "number",
            "title": "Balance"
          },
          "chat_session_count": {
            "type": "integer",
            "title": "Chat Session Count"
          },
          "document_count": {
            "type": "integer",
            "title": "Document Count"
          },
          "workspace_count": {
            "type": "integer",
            "title": "Workspace Count"
          },
          "assistant_count": {
            "type": "integer",
            "title": "Assistant Count"
          }
        },
        "type": "object",
        "required": [
          "username",
          "uuid_id",
          "created_at",
          "balance",
          "chat_session_count",
          "document_count",
          "workspace_count",
          "assistant_count"
        ],
        "title": "PublicUserResponse",
        "description": "Schema for publicly exposed user information."
      },
      "PublicWorkspace": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "L'identifiant unique de l'espace de travail."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Le nom de l'espace de travail."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Une brève description de l'objectif de l'espace de travail."
          },
          "is_default": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Default",
            "description": "Indique s'il s'agit de l'espace de travail par défaut pour l'utilisateur.",
            "default": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "L'horodatage de la création de l'espace de travail."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "L'horodatage de la dernière mise à jour de l'espace de travail."
          },
          "document_count": {
            "type": "integer",
            "title": "Document Count",
            "description": "Le nombre de documents contenus dans l'espace de travail."
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "created_at",
          "updated_at",
          "document_count"
        ],
        "title": "PublicWorkspace"
      },
      "ToolInputSchema": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type",
            "default": "object"
          },
          "properties": {
            "additionalProperties": {
              "$ref": "#/components/schemas/ToolPropertySchema"
            },
            "type": "object",
            "title": "Properties"
          },
          "required": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Required"
          }
        },
        "type": "object",
        "title": "ToolInputSchema"
      },
      "ToolPricingConfig": {
        "properties": {
          "fixed_cost": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fixed Cost"
          },
          "variable_cost_per_unit": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Variable Cost Per Unit"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit"
          }
        },
        "type": "object",
        "title": "ToolPricingConfig"
      },
      "ToolPropertySchema": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "enum": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enum"
          }
        },
        "type": "object",
        "required": [
          "type",
          "description"
        ],
        "title": "ToolPropertySchema"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WorkspaceCreate": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "is_default": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Default",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "WorkspaceCreate"
      }
    },
    "securitySchemes": {
      "APIKeyHeader": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-KEY"
      }
    }
  }
}